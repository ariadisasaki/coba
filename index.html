<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MANTO TV</title>

<!-- HLS + DASH -->
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>

<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{margin:0;background:#061b0f;color:#eafff3}

/* THEME BUTTON */
.theme-toggle{
  position:fixed;top:8px;right:10px;z-index:1600;
  padding:7px 14px;border-radius:20px;border:0;
  background:#0b3d1e;color:#eafff3;font-size:16px;cursor:pointer;
}

/* TICKER */
.ticker{
  position:fixed;top:0;width:100%;height:48px;
  background:#0b3d1e;overflow:hidden;z-index:1000;cursor:pointer;
}
.ticker span{
  display:inline-block;padding:14px 0;white-space:nowrap;
  min-width:100vw;animation:ticker 40s linear infinite;
}
.ticker.paused span{animation-play-state:paused}
@keyframes ticker{from{transform:translateX(100vw)}to{transform:translateX(-100%)}}
.ticker-link{color:#6bff95;font-weight:bold;text-decoration:none}

/* LAYOUT */
.overlay{padding-top:48px}
.container{display:flex;gap:12px;height:calc(100vh - 48px);padding:10px}

/* PLAYER */
.player{flex:3}
.player-wrapper{
  position:relative;width:100%;height:100%;
  background:#022b17;border-radius:10px;
}
video{width:100%;height:100%;object-fit:cover;background:#000}

/* CLOCK */
.clock{
  position:absolute;top:10px;right:14px;
  background:rgba(0,0,0,.6);padding:6px 12px;
  font-size:22px;border-radius:6px;color:#fff;
}

/* QUALITY */
#qualitySelect{
  position:absolute;top:50px;right:14px;
  padding:6px 10px;border-radius:6px;border:0;
  background:rgba(0,0,0,.65);color:#fff;font-size:14px;
}

/* FULLSCREEN */
.fullscreen-btn{
  position:absolute;bottom:14px;right:14px;
  background:rgba(0,120,60,.85);color:#fff;
  border:0;padding:10px 14px;font-size:22px;border-radius:8px;
}

/* CHANNEL LIST */
.channel-list{
  flex:1;background:#08311c;border-radius:8px;
  padding:8px;overflow-y:auto;
}
.channel{
  padding:12px;margin-bottom:8px;
  background:#0f4d2a;border-radius:6px;text-align:center;
  cursor:pointer;
}
.channel.active{background:#2cff9a;color:#002412;font-weight:bold}

/* MOBILE */
@media(max-width:900px){
  .container{flex-direction:column;height:auto}
  .player-wrapper{aspect-ratio:16/9;height:auto}
}

/* LIGHT MODE */
body.light{background:#f6fff8;color:#003018}
body.light .ticker{background:#c8ffd7}
body.light .channel{background:#00b463;color:#fff}
</style>
</head>

<body>

<button id="themeToggle" class="theme-toggle">üåô</button>

<div class="ticker">
  <span>
    Selamat datang di MANTO TV, jika ada keluhan silakan hubungi
    <a class="ticker-link" href="https://www.facebook.com/share/1C8bjd7Xoh" target="_blank">
      Ariadi Forester
    </a>
  </span>
</div>

<div class="overlay">
<div class="container">

<div class="player">
  <div class="player-wrapper" id="playerBox">
    <video id="video" autoplay muted playsinline controls></video>
    <div class="clock" id="clock"></div>
    <select id="qualitySelect"><option>AUTO</option></select>
    <button class="fullscreen-btn" onclick="toggleFullscreen()">‚õ∂</button>
  </div>
</div>

<div class="channel-list">
    <div class="channel active" data-url="https://video.detik.com/trans7/smil:trans7.smil/index.m3u8">TRANS 7</div>
    <div class="channel" data-url="https://video.detik.com/transtv/smil:transtv.smil/index.m3u8">TRANS TV</div>
    <div class="channel" data-url="https://live.cnnindonesia.com/livecnn/smil:cnntv.smil/chunklist_w2069057087_b384000_sleng.m3u8">CNN INDONESIA</div>
    <div class="channel" data-url="https://rodjatv.com/rodjatv/live_720p2628kbs/index.m3u8">RODJA TV</div>
    <div class="channel" data-url="https://h1.intechmedia.net/intech/ch1.m3u8">INSAN TV</div>
    <div class="channel" data-url="https://selaparangtv.siar.us/live/selaparangtv.m3u8">SELAPARANG TV</div>
    <div class="channel" data-url="https://lingkartv.my.id/hls/lingkartv.m3u8">LINGKAR TV</div>
    <div class="channel" data-url="https://rmtv.akamaized.net/hls/live/2043154/rmtv-en-web/bitrate_3.m3u8">REAL MADRID TV</div>
    <div class="channel" data-url="https://amg00477-samsunguk-wilderplanet-samsunguk-samsunguk-yt0go.amagi.tv/playlist/amg00477-samsunguk-wilderplanet-samsunguk-samsunguk/playlist.m3u8">WILD PLANET</div>
    <div class="channel" data-url="https://rbmn-live.akamaized.net/hls/live/590964/BoRB-AT/master_578.m3u8">RED BULL TV</div>
    <div class="channel" data-url="http://amdlive-ch01.ctnd.com.edgesuite.net/arirang_1ch/smil:arirang_1ch.smil/playlist.m3u8">ARIRANG TV</div>
    <div class="channel" data-url="https://streamcdne2-4c4b867c89244861ac216426883d1ad0.msvdn.net/live/S62628868/uhdWBlkC1AoO/chunklist_b2428000.m3u8">M2O TV</div>
</div>

</div>
</div>

<script>
const video=document.getElementById("video");
const channels=document.querySelectorAll(".channel");
const qualitySelect=document.getElementById("qualitySelect");
const playerBox=document.getElementById("playerBox");
const clock=document.getElementById("clock");
const ticker=document.querySelector(".ticker");
const themeToggle=document.getElementById("themeToggle");

let hls=null,dash=null,currentUrl="",retry=0;
const MAX_RETRY=5;

/* THEME */
themeToggle.onclick=()=>{
  document.body.classList.toggle("light");
  themeToggle.textContent=document.body.classList.contains("light")?"‚òÄÔ∏è":"üåô";
};

/* DETECT */
function typeOf(url){
  if(url.includes(".m3u8"))return"hls";
  if(url.includes(".mpd"))return"dash";
  if(url.match(/\.(mp4|webm|mkv)$/))return"mp4";
}

/* CLEAN */
function reset(){
  if(hls){hls.destroy();hls=null}
  if(dash){dash.reset();dash=null}
  video.removeAttribute("src");video.load();
  qualitySelect.innerHTML="<option value='-1'>AUTO</option>";
}

/* RETRY */
function retryStream(){
  if(retry>=MAX_RETRY)return;
  retry++;
  setTimeout(()=>play(currentUrl),2000*retry);
}

/* PLAY */
function play(url){
  currentUrl=url;retry=0;reset();
  const t=typeOf(url);

  if(t==="hls"){
    hls=new Hls({lowLatencyMode:true});
    hls.on(Hls.Events.MANIFEST_PARSED,(_,d)=>{
      d.levels.forEach((l,i)=>{
        let o=document.createElement("option");
        o.value=i;o.text=l.height+"p";
        qualitySelect.appendChild(o);
      });
    });
    hls.on(Hls.Events.ERROR,(_,e)=>{if(e.fatal)retryStream()});
    hls.loadSource(url);hls.attachMedia(video);
  }
  else if(t==="dash"){
    dash=dashjs.MediaPlayer().create();
    dash.initialize(video,url,true);
    dash.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,()=>{
      dash.getBitrateInfoListFor("video").forEach((q,i)=>{
        let o=document.createElement("option");
        o.value=i;o.text=Math.round(q.bitrate/1000)+" kbps";
        qualitySelect.appendChild(o);
      });
    });
    dash.on("error",retryStream);
  }
  else video.src=url;

  video.play().catch(()=>{});
}

/* QUALITY */
qualitySelect.onchange=()=>{
  let q=parseInt(qualitySelect.value);
  if(hls)hls.currentLevel=q;
  if(dash){
    q==-1?dash.setAutoSwitchQualityFor("video",true):
    (dash.setAutoSwitchQualityFor("video",false),dash.setQualityFor("video",q));
  }
};

/* CHANNEL */
channels.forEach(c=>{
  c.onclick=()=>{
    channels.forEach(x=>x.classList.remove("active"));
    c.classList.add("active");
    play(c.dataset.url);
  };
});
play(channels[0].dataset.url);

/* FULLSCREEN */
function toggleFullscreen(){
  !document.fullscreenElement?playerBox.requestFullscreen():
  document.exitFullscreen();
}

/* CLOCK */
setInterval(()=>clock.textContent=new Date().toLocaleTimeString("id-ID"),1000);

/* TICKER */
ticker.onclick=()=>ticker.classList.toggle("paused");

/* VIDEO ERROR */
video.addEventListener("error",retryStream);
video.addEventListener("stalled",retryStream);
</script>

</body>
</html>
