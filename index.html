
<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MANTO TV</title>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{margin:0;background:#061b0f;color:#eafff3}

/* ===== THEME BUTTON ===== */
.theme-toggle{
  position:fixed;
  top:8px;
  right:10px;
  z-index:1600;
  padding:7px 14px;
  border-radius:20px;
  border:0;
  cursor:pointer;
  background:#0b3d1e;
  color:#eafff3;
  font-size:16px;
  transition:.25s ease;
}
.theme-toggle:hover{
  background:#00d86f;
  transform:scale(1.1);
  box-shadow:0 0 12px rgba(0,255,140,.7);
}

/* ===== TICKER ===== */
.ticker{
  position:fixed;
  top:0;
  width:100%;
  height:48px;
  background:#0b3d1e;
  overflow:hidden;
  z-index:1000;
  cursor:pointer;
}
.ticker span{
  display:inline-block;
  padding:14px 0;
  white-space:nowrap;
  min-width:100vw;
  animation:ticker 40s linear infinite;
}
.ticker:hover span{animation-play-state:paused;}
.ticker.paused span{animation-play-state:paused;}

@keyframes ticker{
  from{transform:translateX(100vw)}
  to{transform:translateX(-100%)}
}

.ticker-link{
  color:#6bff95;
  font-weight:bold;
  text-decoration:none;
}

/* ===== LAYOUT ===== */
.overlay{padding-top:48px}
.container{
  display:flex;
  gap:12px;
  height:calc(100vh - 48px);
  padding:10px;
}

/* ===== PLAYER ===== */
.player{flex:3}
.player-wrapper{
  position:relative;
  width:100%;
  height:100%;
  background:#022b17;
  border-radius:10px;
  box-shadow:0 0 18px rgba(0,255,128,.25);
}
video{
  width:100%;
  height:100%;
  object-fit:cover;
  background:#000;
}

/* FULLSCREEN BUTTON */
.fullscreen-btn{
  position:absolute;
  bottom:14px;
  right:14px;
  background:rgba(0,120,60,.85);
  color:#fff;
  border:0;
  padding:12px 18px;
  border-radius:10px;
  cursor:pointer;
  font-size:26px;
  transition:.25s ease;
}
.fullscreen-btn:hover{
  background:#00ff8a;
  color:#003018;
  transform:scale(1.12);
  box-shadow:0 0 14px rgba(0,255,140,.9);
}

/* CLOCK */
.clock{
  position:absolute;
  top:10px;
  right:14px;
  background:rgba(0,0,0,.6);
  padding:8px 14px;
  font-size:26px;
  border-radius:8px;
  color:#fff;
  font-weight:bold;
}

/* ===== CHANNEL LIST ===== */
.channel-list{
  flex:1;
  background:#08311c;
  border-radius:8px;
  padding:8px;
  overflow-y:auto;
}
.channel{
  padding:12px;
  margin-bottom:8px;
  background:#0f4d2a;
  border-radius:6px;
  text-align:center;
  cursor:pointer;
  color:#eafff3;
  transition:.2s ease;
}
.channel:hover{
  background:#00d86f;
  color:#003018;
  transform:scale(1.04);
  box-shadow:0 0 10px rgba(0,255,140,.6);
}
.channel.active{
  background:#2cff9a;
  color:#002412;
  font-weight:bold;
}

/* ===== MOBILE ===== */
@media(max-width:900px){
  .container{flex-direction:column;height:auto}
  .player{position:sticky;top:48px}
  .player-wrapper{aspect-ratio:16/9;height:auto}
  .channel-list{max-height:calc(100vh - 48px - 56vw)}
  .clock{font-size:13px;padding:4px 8px}
  .fullscreen-btn{font-size:20px;padding:8px 12px}
}

/* ===== FULLSCREEN FIX ===== */
:fullscreen video{
  object-fit:contain !important;
  width:100%;
  height:100%;
}
:fullscreen .ticker,
:fullscreen .channel-list,
:fullscreen .theme-toggle{
  display:none;
}

/* ===== LIGHT MODE ===== */
body.light{background:#f6fff8;color:#003018}
body.light .ticker{background:#c8ffd7}
body.light .ticker-link{color:#007a3d}
body.light .channel{background:#00b463;color:#fff}
body.light .channel:hover{background:#00ff95;color:#003018}
body.light .channel.active{background:#009c55}
body.light .theme-toggle{background:#00b463}
body.light .theme-toggle:hover{background:#00ff95}
</style>
</head>

<body>

<button id="themeToggle" class="theme-toggle">ðŸŒ™</button>

<div class="ticker" title="Klik untuk pause / jalan">
  <span>
    Selamat datang di MANTO TV, jika ada keluhan silakan hubungi
    <a class="ticker-link" href="https://www.facebook.com/share/1C8bjd7Xoh" target="_blank">
      Ariadi Forester
    </a>
  </span>
</div>

<div class="overlay">
<div class="container">

  <div class="player">
    <div class="player-wrapper" id="playerBox">
      <video id="video" muted autoplay playsinline controls></video>
      <div class="clock" id="clock"></div>
      <button class="fullscreen-btn" onclick="toggleFullscreen()">â›¶</button>
    </div>
  </div>

  <div class="channel-list">
    <div class="channel active" data-id="rmtv">REAL MADRID TV</div>
    <div class="channel" data-id="b1">BERITA SATU ENGLISH</div>	
    <div class="channel" data-id="cnn">CNN INDONESIA</div>
	
  </div>

</div>
</div>

<script>
const video = document.getElementById("video");
const channels = document.querySelectorAll(".channel");

let hls;

// ===== AMBIL URL STREAM DARI WORKER =====
async function getStreamUrl(channelId){
  const res = await fetch(
    `https://mantosecret.ariadishut.workers.dev/token?id=${channelId}`
  );
  const data = await res.json();
  return data.url;
}

// ===== PLAY TV =====
async function playTV(channelId){
  if(hls) hls.destroy();

  try{
    const url = await getStreamUrl(channelId);
    console.log("Stream:", url);

    if(Hls.isSupported()){
      hls = new Hls();
      hls.loadSource(url);
      hls.attachMedia(video);
    }else{
      video.src = url;
    }

    video.play().catch(()=>{});
  }catch(err){
    console.error("Error:", err);
  }
}

// ===== EVENT CHANNEL CLICK =====
channels.forEach(ch=>{
  ch.onclick=()=>{
    channels.forEach(c=>c.classList.remove("active"));
    ch.classList.add("active");
    playTV(ch.dataset.id);
  };
});

// ===== AUTO PLAY CHANNEL PERTAMA =====
playTV(channels[0].dataset.id);

/* THEME */
themeToggle.onclick = () => {
  document.body.classList.toggle("light");
  themeToggle.textContent =
    document.body.classList.contains("light") ? "â˜€ï¸" : "ðŸŒ™";
};

/* FULLSCREEN */
function toggleFullscreen(){
  if(!document.fullscreenElement){
    playerBox.requestFullscreen();
    screen.orientation?.lock("landscape").catch(()=>{});
  }else{
    document.exitFullscreen();
    screen.orientation?.unlock();
  }
}

/* CLOCK */
setInterval(()=>{
  clock.textContent = new Date().toLocaleTimeString("id-ID");
},1000);

/* TICKER CLICK PAUSE */
ticker.onclick = () => {
  ticker.classList.toggle("paused");
};
</script>

</body>
</html>
